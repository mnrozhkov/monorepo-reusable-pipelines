schema: '2.0'
stages:
  collect_data:
    cmd:
    - mkdir -p data/a_segment/x/raw
    - python ml/src/collect_data.py --target x --params pipeline_a_segment/x/params.yaml
    deps:
    - path: ml/src/collect_data.py
      hash: md5
      md5: 622a14e879e077e3ec7480459dcc4088
      size: 1229
    params:
      pipeline_a_segment/x/params.yaml:
        target: x
    outs:
    - path: data/a_segment/x/raw/data.csv
      hash: md5
      md5: 9afa47e13870a30a1bf5c2b33e73a06c
      size: 7952
  process_data:
    cmd:
    - mkdir -p data/a_segment/x/processed
    - python ml/src/process_data.py --target x --params pipeline_a_segment/x/params.yaml
    deps:
    - path: data/a_segment/x/raw/data.csv
      hash: md5
      md5: 9afa47e13870a30a1bf5c2b33e73a06c
      size: 7952
    - path: ml/src/process_data.py
      hash: md5
      md5: 52b38150b3d1a9d87001eddb33c21f81
      size: 925
    params:
      pipeline_a_segment/x/params.yaml:
        target: x
    outs:
    - path: data/a_segment/x/processed/data.csv
      hash: md5
      md5: 9afa47e13870a30a1bf5c2b33e73a06c
      size: 7952
  train:
    cmd: python ml/src/train.py --type pipeline_a_segment --target x --params pipeline_a_segment/x/params.yaml
    deps:
    - path: data/a_segment/x/processed/data.csv
      hash: md5
      md5: 9afa47e13870a30a1bf5c2b33e73a06c
      size: 7952
    - path: ml/src/train.py
      hash: md5
      md5: ab57e52b982359a4814ac85b8c75a59f
      size: 2461
    params:
      pipeline_a_segment/x/params.yaml:
        train:
          epochs: 20
          batch_size: 64
          learning_rate: 0.003
    outs:
    - path: pipeline_a_segment/x/models/model_pipeline_a_segment_x.file
      hash: md5
      md5: c24ca819895bd3c914461c494e6fd4a4
      size: 7472
